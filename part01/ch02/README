ch02. 네트워크의 기본이론
section07. 포로토콜이란
<ARP>
주소 변환 프로토콜(Address Resolution Protocol). IP주소를 물리 주소로 변환하기 위해 사용되는 프로토콜. 패킷은 물리 주소로 다음목적지(로컬 네트워크에서 물리주소 기준)로 가고 IP주소로 최종 목적지로 가기 때문에 필요한 프로토콜.

물리 주소 변환시 ARP 요청 패킷 생성후 네트워크 전체 브로드 캐스팅(호스트 주소가 전부 FF).
예) 203.237.229.0 클래스 C 네트워크. subnet mask 255.255.255.0 이면, 브로드캐스팅 IP 203.237.229.255. 이 주소로 보내면 해당 네트워크 내의 모든 호스트가 해당패킷을 수신함.

요청 순서
1. ARP 헤더에 Sender물리주소, 프로토콜 필드에 IP주소, Target의 주소필드에 해당 IP주소(물리주소로 변환하려는) 입력
2. OPERATION => “요청” 설정
3. 각 필드 값 설정
4. 브로드 캐스팅

요청패킷을 받으면 OPERATION=> “응답” 설정, 헤더에 물리주소 설정. 요청한 IP로 보냄.

<ICMP>
네트워크 발생시 생기는 여러 문제를 제어하기 위한 프로토콜. ICMP프로토콜은 여러 패킷을 정의하는데, 그중 대표적인게 PING패킷. ICMP 종류는 '오류보고 메시지', '질의 메시지'로 크게 2가지.

오류보고메시지(라우터/호스트가 패킷처리 문제발생시 보냄): 번호는 ICMP Type

* 목적지 도달 불가능(Destination unreachable): 3
패킷을 받은 라우터/호스트가 더이상 패킷을 보낼곳이 없을때 발신지 호스트에게 보냄. 중간에 라우터 고장/방화벽 설치된 경우 발생.

* 발신지 억제(Source quench): 4
라우터/호스트가 많은 패킷을 받아 처리가 힘들때 호스트에게 보냄. 이 패킷을 받으면 발신지 호스트는 패킷을 보내는 속도를 줄임

* 재지정(Redirection): 5
라우터가 판단하기에 다른 라우터가 효율적인 상황일때 발신지 호스트에게 보내는 메시지. 재지정 메시지를 받은 발신지 호스트는 재지정된 라우터로 패킷을 보냄

* 시간 경과(Time exceeded): 11
패킷이 너무 많은 라우터를 거쳐 TTL필드가 0이 된 경우 발생. 해당 패킷을 폐기하고 발신지 호스트에 시간경과 메시지를 보냄.(패킷이 라우터를 거치며 네트워크 내에서 계속 떠돌수 있기 때문)
TTL값은 OS에 따라 255, 128로 설정

* 매개변수 문제(Parameter problem): 12
패킷의 헤더에 이상이 있을때 발생. 해당 패킷을 폐기하고 발신지 호스트에 알림

질의 메시지(관리자/호스트/라우터가 다른 호스트에게 현재상황을 질의)
* 에코 요청과 응답(Echo request or reply): 8, 0
ping 패킷. 고장진단 및 경로 확인시 사용

* 라우터 간청과 광고(Router soliciation or advertisement): 10, 9
* 타임스탬프 요청과 응답(Timestamp request or reply): 13, 14
* 주소 마스크 요청과 응답(Address mask request or reply): 17, 18

<IGMP>
멀티 캐스트를 위한 프로토콜. 1개의 발신지와 N개의 호스트가 통신. 수신되는 N개의 호스트를 그룹, 그룹을 관리하는 라우터를 멀티캐스트 라우터, 이러한 그룹의 가입과 탈퇴등의 관리 프로토콜이 IGMP.


